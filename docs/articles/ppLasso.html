<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ppLasso • ppLasso</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ppLasso">
<meta property="og:description" content="ppLasso">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-54921687-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-54921687-5');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ppLasso</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ppLasso.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Models.html">Models</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ppLasso</h1>
            
      
      
      <div class="hidden name"><code>ppLasso.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction:<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><code>ppLasso</code> stands as a dedicated R package tailored to
fitting penalized regression models for both generalized linear models
and discrete survival models. Its development was precisely geared
towards efficiently handling data sets with a substantial number of
health providers. Notably, our statistical tool surpasses existing
methods, showcasing a significant margin of improvement in convergence
speed, as substantiated by comprehensive evaluations using simulated
studies and real-world data. In this tutorial, we aim to illustrate the
practical application of <code>ppLasso</code> by employing example
datasets.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation:<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"UM-KevinHe/grplasso"</span>, ref <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start:<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>In this section, we will explore the fundamental usage of the
functions integrated into the current R package, providing a detailed
interpretation of the resulting values obtained from these functions. To
enhance users’ understanding of the R package, we will employ example
datasets, enabling a comprehensive grasp of its functionalities.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ppLasso</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="generalized-linear-models">Generalized linear models<a class="anchor" aria-label="anchor" href="#generalized-linear-models"></a>
</h3>
<p>To exemplify the process of fitting a generalized linear model, we
will utilize the “GLM_Data” dataset included in the package. This
dataset consists of five predictors, an indicator for provider
information, and a binary outcome variable.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">GLM_Data</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">GLM_Data</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="va">Y.char</span> <span class="op">&lt;-</span> <span class="va">GLM_Data</span><span class="op">$</span><span class="va">Y.char</span> <span class="co"># variable name of outcome variable</span></span>
<span><span class="va">prov.char</span> <span class="op">&lt;-</span> <span class="va">GLM_Data</span><span class="op">$</span><span class="va">prov.char</span> <span class="co"># variable name of provider indicator</span></span>
<span><span class="va">Z.char</span> <span class="op">&lt;-</span> <span class="va">GLM_Data</span><span class="op">$</span><span class="va">Z.char</span> <span class="co"># variable names of predictors</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Y Prov.ID     Z1     Z2     Z3     Z4     Z5</span></span>
<span><span class="co">#&gt; 1 1      10 -0.006 -0.159  0.588  0.378 -1.430</span></span>
<span><span class="co">#&gt; 2 0      11  0.862 -0.162  0.243  0.503  0.549</span></span>
<span><span class="co">#&gt; 3 0      11  0.453  0.961  0.665  0.522  0.859</span></span>
<span><span class="co">#&gt; 4 1       8 -0.286  0.001  0.903  0.886 -0.324</span></span>
<span><span class="co">#&gt; 5 0      13  0.564 -0.194 -0.062 -0.792 -0.783</span></span>
<span><span class="co">#&gt; 6 1      18  0.676  1.095  2.223  1.367  1.060</span></span></code></pre></div>
<div class="section level4">
<h4 id="without-grouped-covariate">without grouped covariate<a class="anchor" aria-label="anchor" href="#without-grouped-covariate"></a>
</h4>
<p>The <code><a href="../reference/pp.lasso.html">pp.lasso()</a></code> function is employed to fit a generalized
linear model when the covariate does not include any group information.
When the user does not specify the regularization coefficient <span class="math inline">\(\lambda\)</span>, our function automatically
generates a sequence of <span class="math inline">\(\lambda\)</span>
values by default. The sequence starts with the largest <span class="math inline">\(\lambda\)</span>, which penalizes all covariates
to zero, and then gradually decreases <span class="math inline">\(\lambda\)</span> to allow for variable selection
and modeling flexibility.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pp.lasso.html">pp.lasso</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">Y.char</span>, <span class="va">Z.char</span>, <span class="va">prov.char</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef()</a></code> function serves to provide estimates of the
coefficients in the fitted model. The resulting coefficient matrix is
structured such that the column names correspond to the <span class="math inline">\(\lambda\)</span> values used in the modeling
process.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># estimate of covariate coefficients</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span><span class="op">$</span><span class="va">beta</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;    0.132    0.1202    0.1096    0.0998     0.091</span></span>
<span><span class="co">#&gt; Z1     0 0.0000000 0.0000000 0.0000000 0.0000000</span></span>
<span><span class="co">#&gt; Z2     0 0.0000000 0.0000000 0.0000000 0.0000000</span></span>
<span><span class="co">#&gt; Z3     0 0.1120347 0.2148847 0.3098777 0.3980465</span></span>
<span><span class="co">#&gt; Z4     0 0.0000000 0.0000000 0.0000000 0.0000000</span></span>
<span><span class="co">#&gt; Z5     0 0.0000000 0.0000000 0.0000000 0.0000000</span></span>
<span><span class="co"># estimate of provider effects</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span><span class="op">$</span><span class="va">gamma</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;         0.132     0.1202     0.1096     0.0998      0.091</span></span>
<span><span class="co">#&gt; 1  -0.2411977 -0.2939898 -0.3431091 -0.3889330 -0.4318211</span></span>
<span><span class="co">#&gt; 2  -1.9635362 -1.8742433 -1.7984115 -1.7336457 -1.6779754</span></span>
<span><span class="co">#&gt; 3  -1.2089403 -1.1883078 -1.1712888 -1.1572109 -1.1455229</span></span>
<span><span class="co">#&gt; 4  -1.9600386 -1.8922127 -1.8332183 -1.7815619 -1.7360041</span></span>
<span><span class="co">#&gt; 5  -0.5500569 -0.5698456 -0.5894538 -0.6087582 -0.6276779</span></span>
<span><span class="co">#&gt; 6  -1.3694159 -1.2813234 -1.2034985 -1.1342974 -1.0723356</span></span>
<span><span class="co">#&gt; 7  -0.4661063 -0.4936788 -0.5199327 -0.5449261 -0.5687380</span></span>
<span><span class="co">#&gt; 8  -0.4274344 -0.4203383 -0.4151684 -0.4115749 -0.4092523</span></span>
<span><span class="co">#&gt; 9   1.0329137  0.8945008  0.7694552  0.6557870  0.5517900</span></span>
<span><span class="co">#&gt; 10 -0.9075577 -0.9146380 -0.9232143 -0.9328743 -0.9433025</span></span></code></pre></div>
<p>The <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function is designed to generate a figure
depicting the regularization path. This path illustrates the behavior of
the coefficients for each predictor variable as the regularization
parameter <span class="math inline">\(\lambda\)</span> varies. By
visualizing the regularization path, users can gain valuable insights
into the impact of different regularization strengths on the
coefficients, aiding in model interpretation and selection.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span>, label <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="ppLasso_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>The <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> function is utilized to generate model
predictions for a given dataset based on the coefficient estimates
obtained from the fitted model. Once the model has been trained using
the <code><a href="../reference/pp.lasso.html">pp.lasso()</a></code> function and the coefficients have been
estimated, the predict function can be applied to new data to obtain
predictions for the outcome variable.</p>
<p>This function offers various types of outputs to suit different
analysis needs. For instance, when fitting a penalized logistic
regression model, using <strong>type = “response”</strong> provides the
probabilities of “Y = 1” for each observation, while <strong>type =
“class”</strong> provides the predicted class.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">data</span>, <span class="va">Z.char</span>, <span class="va">prov.char</span>, lambda <span class="op">=</span> <span class="va">fit</span><span class="op">$</span><span class="va">lambda</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;           0.132    0.1202    0.1096    0.0998     0.091</span></span>
<span><span class="co">#&gt;  [1,] 0.2874999 0.2996927 0.3106971 0.3206762 0.3297643</span></span>
<span><span class="co">#&gt;  [2,] 0.2051302 0.2112109 0.2163924 0.2208163 0.2246015</span></span>
<span><span class="co">#&gt;  [3,] 0.2051302 0.2191951 0.2321638 0.2441339 0.2551989</span></span>
<span><span class="co">#&gt;  [4,] 0.3947391 0.4208778 0.4449423 0.4671087 0.4875485</span></span>
<span><span class="co">#&gt;  [5,] 0.2345694 0.2340619 0.2330311 0.2316163 0.2299295</span></span>
<span><span class="co">#&gt;  [6,] 0.3188411 0.3744516 0.4280555 0.4786478 0.5256182</span></span>
<span><span class="co">#&gt;  [7,] 0.3924033 0.3836025 0.3752418 0.3673071 0.3597819</span></span>
<span><span class="co">#&gt;  [8,] 0.3658512 0.3870533 0.4065558 0.4245437 0.4411742</span></span>
<span><span class="co">#&gt;  [9,] 0.2298886 0.2256943 0.2215601 0.2175107 0.2135686</span></span>
<span><span class="co">#&gt; [10,] 0.3947391 0.4374814 0.4772352 0.5139266 0.5476058</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">data</span>, <span class="va">Z.char</span>, <span class="va">prov.char</span>, lambda <span class="op">=</span> <span class="fl">0.001</span>, type <span class="op">=</span> <span class="st">"class"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] 1 0 0 1 0 1 0 1 0 1</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="with-grouped-covariate">with grouped covariate<a class="anchor" aria-label="anchor" href="#with-grouped-covariate"></a>
</h4>
<p>The utilization of the <code><a href="../reference/grp.lasso.html">grp.lasso()</a></code> function is similar
to the previously mentioned methods, with the added requirement of
providing group information for the covariates. When calling the
function, users should provide the necessary group information to ensure
proper grouping of variables for regularization. However, if the user
does not explicitly provide the group information, the
<code><a href="../reference/grp.lasso.html">grp.lasso()</a></code> function will automatically assume that each
variable is treated as an individual group on its own. This default
behavior simplifies the process for users who do not wish to specify
explicit groups, ensuring that the function can still be applied
effectively without the need for additional input.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">group</span> <span class="op">&lt;-</span> <span class="va">GLM_Data</span><span class="op">$</span><span class="va">group</span></span>
<span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/grp.lasso.html">grp.lasso</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">Y.char</span>, <span class="va">Z.char</span>, <span class="va">prov.char</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit2</span><span class="op">)</span></span></code></pre></div>
<p><img src="ppLasso_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="regularization-parameter-selection-for-glm-problems">regularization parameter selection for glm problems<a class="anchor" aria-label="anchor" href="#regularization-parameter-selection-for-glm-problems"></a>
</h4>
<p>The optimal regularization parameter (<span class="math inline">\(\lambda\)</span>) is determined through
cross-validation. To find the best <span class="math inline">\(\lambda\)</span>, users can employ either the
<code><a href="../reference/cv.pp.lasso.html">cv.pp.lasso()</a></code> or <code><a href="../reference/cv.grp.lasso.html">cv.grp.lasso()</a></code> function,
depending on the specific type of model they are working with. These
cross-validation functions inherit the parameters required for the model
fitting process, providing a seamless and straightforward experience for
users. By default, both functions utilize 10-fold cross-validation.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cv.pp.lasso.html">cv.pp.lasso</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">Y.char</span>, <span class="va">Z.char</span>, <span class="va">prov.char</span>, nfolds <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function, applied to a
<code>cv.pp.lasso</code> or <code>cv.grp.lasso</code> object, generates
a figure that enables users to assess how the cross-entropy loss changes
with varying values of <span class="math inline">\(\lambda\)</span>. By
observing the plot, users can easily identify the point at which the
cross-entropy loss is minimized.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p><img src="ppLasso_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>Indeed, users can directly use the <strong>fit$lambda.min</strong>
command to obtain the optimal value of <span class="math inline">\(\lambda\)</span>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span><span class="op">$</span><span class="va">lambda.min</span></span>
<span><span class="co">#&gt; [1] 0.001259591</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="discrete-survival-models">Discrete survival models<a class="anchor" aria-label="anchor" href="#discrete-survival-models"></a>
</h3>
<p>The <code><a href="../reference/pp.DiscSurv.html">pp.DiscSurv()</a></code> function is utilized for fitting a
penalized discrete survival model. In contrast to the current R package,
this function does not necessitate data expansion based on discrete time
points, resulting in a significant reduction in memory usage and
convergence time required for operation.</p>
<p>The <code>Surv_Data</code> dataset, included in this package,
comprises of 5 covariates, provider information, observation time, and
event indicator. We will be using this dataset as an example to
illustrate how to utilize it.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Surv_Data</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">Surv_Data</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="va">Event.char</span> <span class="op">&lt;-</span> <span class="va">Surv_Data</span><span class="op">$</span><span class="va">Event.char</span></span>
<span><span class="va">prov.char</span> <span class="op">&lt;-</span> <span class="va">Surv_Data</span><span class="op">$</span><span class="va">prov.char</span></span>
<span><span class="va">Z.char</span> <span class="op">&lt;-</span> <span class="va">Surv_Data</span><span class="op">$</span><span class="va">Z.char</span></span>
<span><span class="va">Time.char</span> <span class="op">&lt;-</span> <span class="va">Surv_Data</span><span class="op">$</span><span class="va">Time.char</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Prov.ID     Z1     Z2     Z3     Z4     Z5  time status</span></span>
<span><span class="co">#&gt; 1       4 -1.298 -1.471 -1.346 -1.775 -1.241  1.03      1</span></span>
<span><span class="co">#&gt; 2       5  0.192  0.163  0.953  1.083  0.371 12.50      0</span></span>
<span><span class="co">#&gt; 3       4 -2.315 -2.038 -1.629 -2.577 -2.008  0.53      1</span></span>
<span><span class="co">#&gt; 4       1 -0.198  1.231  0.633  0.739  0.214  6.74      1</span></span>
<span><span class="co">#&gt; 5       2  0.469  0.640 -0.583  0.161  0.927 12.50      0</span></span>
<span><span class="co">#&gt; 6       4 -1.445 -1.848 -3.024 -2.117 -1.894  0.53      1</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pp.DiscSurv.html">pp.DiscSurv</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">Event.char</span>, <span class="va">prov.char</span>, <span class="va">Z.char</span>, <span class="va">Time.char</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/pp.DiscSurv.html">pp.DiscSurv()</a></code> function yields three main sets of
coefficients as its primary output. These coefficients pertain to the
covariate estimates, log-transformed baseline hazard for various time
points, and provider effects. To avoid multicollinearity problems, we
designate the first provider as the reference group.</p>
<p>Similar to the GLM fitting functions mentioned earlier,
<code><a href="../reference/pp.DiscSurv.html">pp.DiscSurv()</a></code> is also furnished with a <code><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef()</a></code>
function. This function facilitates the provision of coefficient
estimates within the fitted penalized discrete survival model across the
entire sequence of <span class="math inline">\(\lambda\)</span> values
employed in the modeling procedure.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span><span class="op">$</span><span class="va">beta</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;    0.1601     0.1458     0.1329     0.1211     0.1103</span></span>
<span><span class="co">#&gt; Z1      0 -0.1735757 -0.3325774 -0.4793679 -0.6155647</span></span>
<span><span class="co">#&gt; Z2      0  0.0000000  0.0000000  0.0000000  0.0000000</span></span>
<span><span class="co">#&gt; Z3      0  0.0000000  0.0000000  0.0000000  0.0000000</span></span>
<span><span class="co">#&gt; Z4      0  0.0000000  0.0000000  0.0000000  0.0000000</span></span>
<span><span class="co">#&gt; Z5      0  0.0000000  0.0000000  0.0000000  0.0000000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span><span class="op">$</span><span class="va">gamma</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;       0.1601     0.1458    0.1329     0.1211     0.1103</span></span>
<span><span class="co">#&gt; 1  0.0000000  0.0000000  0.000000  0.0000000  0.0000000</span></span>
<span><span class="co">#&gt; 2 -4.5665147 -4.3516946 -4.162992 -3.9945779 -3.8425705</span></span>
<span><span class="co">#&gt; 3 -0.7478311 -0.7116142 -0.682481 -0.6580980 -0.6367834</span></span>
<span><span class="co">#&gt; 4  1.2412090  1.1456446  1.059286  0.9815198  0.9121089</span></span>
<span><span class="co">#&gt; 5 -2.3399410 -2.1966372 -2.070536 -1.9577270 -1.8555876</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span><span class="op">$</span><span class="va">alpha</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;                 0.1601    0.1458    0.1329    0.1211    0.1103</span></span>
<span><span class="co">#&gt; [Time: 0.53] -1.668065 -1.747753 -1.824209 -1.898663 -1.971909</span></span>
<span><span class="co">#&gt; [Time: 1.03] -1.480994 -1.526815 -1.571328 -1.615488 -1.659886</span></span>
<span><span class="co">#&gt; [Time: 3.92] -1.622145 -1.641556 -1.661848 -1.683563 -1.706991</span></span>
<span><span class="co">#&gt; [Time: 6.74] -1.251585 -1.257340 -1.264124 -1.272503 -1.282795</span></span>
<span><span class="co">#&gt; [Time: 12.5] -1.781635 -1.780095 -1.780526 -1.783340 -1.788771</span></span></code></pre></div>
<p>Users have the option to utilize the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function,
which generates a figure illustrating the regularization path. This
visual representation showcases the behavior of the coefficients for
each predictor variable as <span class="math inline">\(\lambda\)</span>
varies.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span>, label <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="ppLasso_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<p>The <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> function is employed to generate model
predictions for a given dataset using the coefficient estimates obtained
from the fitted model. It is essential to note that the discrete time
points within the prediction data set must align with the discrete time
points used during model fitting. If they do not match, the baseline
hazard of mismatches cannot be estimated accurately.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">data</span>, <span class="va">Event.char</span>, <span class="va">prov.char</span>, <span class="va">Z.char</span>, <span class="va">Time.char</span>, lambda <span class="op">=</span> <span class="va">fit</span><span class="op">$</span><span class="va">lambda</span>, type <span class="op">=</span> <span class="st">"response"</span>, which.lambda <span class="op">=</span> <span class="va">fit</span><span class="op">$</span><span class="va">lambda</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;   Individual [Time: 0.53] [Time: 1.03] [Time: 3.92] [Time: 6.74] [Time: 12.5]</span></span>
<span><span class="co">#&gt; 1          1    0.1586823    0.1852773           NA           NA           NA</span></span>
<span><span class="co">#&gt; 2          2    0.1586823    0.1852773    0.1649092    0.2224258    0.1441013</span></span>
<span><span class="co">#&gt; 3          3    0.1586823           NA           NA           NA           NA</span></span>
<span><span class="co">#&gt; 4          4    0.1586823    0.1852773    0.1649092    0.2224258           NA</span></span>
<span><span class="co">#&gt; 5          5    0.1586823    0.1852773    0.1649092    0.2224258    0.1441013</span></span></code></pre></div>
<div class="section level4">
<h4 id="regularization-parameter-selection-for-discrete-survival-models">regularization parameter selection for discrete survival models<a class="anchor" aria-label="anchor" href="#regularization-parameter-selection-for-discrete-survival-models"></a>
</h4>
<p>The optimal regularization parameter (<span class="math inline">\(\lambda\)</span>) is determined through
cross-validation, utilizing the cross-validation error as the guiding
metric. Users can identify the best <span class="math inline">\(\lambda\)</span> value by employing the
<code><a href="../reference/cv.pp.DiscSurv.html">cv.pp.DiscSurv()</a></code> function.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cv.pp.DiscSurv.html">cv.pp.DiscSurv</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">Event.char</span>, <span class="va">prov.char</span>, <span class="va">Z.char</span>, <span class="va">Time.char</span>, nfolds <span class="op">=</span> <span class="fl">10</span>, trace.cv <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting CV fold #1...</span></span>
<span><span class="co">#&gt; Starting CV fold #2...</span></span>
<span><span class="co">#&gt; Starting CV fold #3...</span></span>
<span><span class="co">#&gt; Starting CV fold #4...</span></span>
<span><span class="co">#&gt; Starting CV fold #5...</span></span>
<span><span class="co">#&gt; Starting CV fold #6...</span></span>
<span><span class="co">#&gt; Starting CV fold #7...</span></span>
<span><span class="co">#&gt; Starting CV fold #8...</span></span>
<span><span class="co">#&gt; Starting CV fold #9...</span></span>
<span><span class="co">#&gt; Starting CV fold #10...</span></span></code></pre></div>
<p>Users can either utilize the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function or directly
access the <strong>fit$lambda.min</strong> command to identify the
optimal value of <span class="math inline">\(\lambda\)</span> at which
the cross-entropy loss is minimized.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p><img src="ppLasso_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span><span class="op">$</span><span class="va">lambda.min</span></span>
<span><span class="co">#&gt; [1] 0.002216531</span></span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Yubo Shao.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
